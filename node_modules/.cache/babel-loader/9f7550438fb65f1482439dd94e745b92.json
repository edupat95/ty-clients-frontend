{"ast":null,"code":"import axios from 'axios';\nimport { createMemberClubAdapter } from '../../../adapters/Cashier/memberClub.adapter';\nimport { createMemberAdapter } from '../../../adapters/Cashier/member.adapter';\nimport { createCustomerAdapter } from '../../../adapters/Cashier/customer.adapter';\nimport { getSession } from '../../../utilities/public.utilities';\nconst API_URL = \"http://localhost:8080/api\"; //HARCODE\n\nconst getProducts = async () => {\n  const res = await axios.get(API_URL + `/productos/activos`, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir el menu de products. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n  return res.data;\n};\n\nconst getCustomer = async identificador => {\n  // TOKEN DE SESION DE USUARIO.\n  console.log(\"Entra a getCustomer\");\n  const res = await axios.get(`http://localhost:8080/api/asociado-clubs/club/${getSession().club.id}/ident/${identificador}`, {\n    //Hardcode buscamos al asociado-club\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de MemberClub. Type error -> \" + error);\n    return error;\n  });\n\n  switch (res.code) {\n    case \"ERR_NETWORK\":\n      return 0;\n\n    case \"ERR_BAD_REQUEST\":\n      return 401;\n\n    default:\n      break;\n  } //console.log(\"DATOS DE RES: \", res.data);\n\n\n  const res2 = await axios.get(API_URL + `/asociados/${res.data.idAsociado.id}`, {\n    //Hardcode buscamos al asociado\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de Member. Type error -> \" + error);\n    return error;\n  }); //console.log(\"DATOS DE RES2: \", res2.data);\n\n  switch (res2.code) {\n    case \"ERR_NETWORK\":\n      return 0;\n\n    case \"ERR_BAD_REQUEST\":\n      return 401;\n\n    default:\n      break;\n  }\n\n  console.log(res);\n  console.log(res2);\n\n  if (res.status === 200 && res2.status === 200) {\n    const memberClub = createMemberClubAdapter(res.data); //console.log(\"memberClub: \" + JSON.stringify(memberClub));\n\n    const member = createMemberAdapter(res2.data); //console.log(\"member: \" + JSON.stringify(member))\n\n    const customer = {\n      memberClub: memberClub,\n      member: member\n    };\n    return createCustomerAdapter(customer);\n  }\n};\n\nconst buyCart = async (idComprador, puntosRecompensa) => {\n  const data = {\n    \"id\": idComprador,\n    \"puntosClub\": puntosRecompensa\n  };\n  const res = await axios.patch(API_URL + `/asociado-clubs/venta/${idComprador}/`, data, {\n    //hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if (res === 200) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nconst buyCart2 = async (idComprador, cart) => {\n  let productos = [];\n  cart.forEach(product => {\n    productos.push({\n      \"id\": product.product.id,\n      \"cantidad\": product.quantity\n    });\n  });\n  const data = {\n    \"Venta\": {\n      \"costoTotal\": 0,\n      \"costoTotalPuntos\": 0,\n      \"idCajero\": {\n        \"id\": getSession().id\n      },\n      \"idAsociado\": {\n        \"id\": idComprador\n      }\n    },\n    \"Productos\": productos\n  };\n  console.log(\"ESTE ES -------------->\" + JSON.stringify(data));\n  return true;\n};\n\nconst changeCart = async (idComprador, costoPuntos) => {\n  const data = {\n    \"id\": idComprador,\n    \"puntosClub\": costoPuntos\n  };\n  console.log(\"La data de buy es:\", data);\n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/canje/${idComprador}/`, data, {\n    //hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if (res === 200) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport { getProducts, getCustomer, buyCart, changeCart, buyCart2 };","map":{"version":3,"names":["axios","createMemberClubAdapter","createMemberAdapter","createCustomerAdapter","getSession","API_URL","getProducts","res","get","headers","id_token","then","response","catch","error","console","status","data","getCustomer","identificador","log","club","id","code","res2","idAsociado","memberClub","member","customer","buyCart","idComprador","puntosRecompensa","patch","buyCart2","cart","productos","forEach","product","push","quantity","JSON","stringify","changeCart","costoPuntos"],"sources":["/media/eduardo/DatosUbuntu/Universidad/TY Clients/ty-clients/frontend/ty-clients/src/pages/Cashier/services/cashier.services.ts"],"sourcesContent":["import axios from 'axios';\nimport { MemberClub } from '../../../models/Cashier/memberClub.model';\nimport { Product } from '../../../models/Cashier/product.model';\nimport { Customer } from '../../../models/Cashier/customer.model';\nimport { createMemberClubAdapter } from '../../../adapters/Cashier/memberClub.adapter';\nimport { Member } from '../../../models/Cashier/member.model';\nimport { createMemberAdapter } from '../../../adapters/Cashier/member.adapter';\nimport { createCustomerAdapter } from '../../../adapters/Cashier/customer.adapter';\nimport { getSession } from '../../../utilities/public.utilities';\nimport { ProductInCart } from '../../../models/Cashier/productInCart.model';\n\n\nconst API_URL: string = \"http://localhost:8080/api\"; //HARCODE\n\nconst getProducts = async () => {\n  const res = await axios.get<Array<Product>>(API_URL + `/productos/activos`, { \n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir el menu de products. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  return res.data;\n};\n\n\nconst getCustomer = async (identificador: string) => {\n  // TOKEN DE SESION DE USUARIO.\n  console.log(\"Entra a getCustomer\");\n  const res = await axios.get<MemberClub>(`http://localhost:8080/api/asociado-clubs/club/${getSession().club.id}/ident/${identificador}`, { //Hardcode buscamos al asociado-club\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de MemberClub. Type error -> \" + error);\n    return error;\n  });\n\n  switch(res.code){\n    case \"ERR_NETWORK\":\n      return 0;\n    case \"ERR_BAD_REQUEST\":\n      return 401;\n    default:\n      break;\n  }\n\n  //console.log(\"DATOS DE RES: \", res.data);\n  \n  const res2 = await axios.get<Member>(API_URL + `/asociados/${res.data.idAsociado.id}`, { //Hardcode buscamos al asociado\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de Member. Type error -> \" + error);\n    return error;\n  });\n\n  //console.log(\"DATOS DE RES2: \", res2.data);\n  \n  switch(res2.code){\n    case \"ERR_NETWORK\":\n      return 0;\n    case \"ERR_BAD_REQUEST\":\n      return 401;\n    default:\n      break;\n  }\n\n  console.log(res);\n  console.log(res2);\n\n  if ((res.status === 200 && res2.status === 200)) {\n    const memberClub = createMemberClubAdapter(res.data);\n    //console.log(\"memberClub: \" + JSON.stringify(memberClub));\n    const member = createMemberAdapter(res2.data)\n    //console.log(\"member: \" + JSON.stringify(member))\n    const customer: Customer = {\n      memberClub: memberClub,\n      member: member\n    }\n   \n    return createCustomerAdapter(customer);\n  }\n}\n\nconst buyCart = async (idComprador: number, puntosRecompensa: number) => {\n  const data = { \n    \"id\": idComprador,\n    \"puntosClub\": puntosRecompensa\n  }\n  const res = await axios.patch(API_URL + `/asociado-clubs/venta/${idComprador}/`, data, { //hardcode\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getSession().id_token\n  },\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n  \n  if(res === 200){\n    return true;\n  } else {\n    return false;\n  }\n}\nconst buyCart2 = async (idComprador: number, cart: Array<ProductInCart>) => {\n  let productos = [];\n  cart.forEach((product) => {\n    productos.push({\n      \"id\": product.product.id,\n      \"cantidad\": product.quantity\n    });\n  });\n  const data = { \n    \"Venta\": {\n      \"costoTotal\": 0,\n      \"costoTotalPuntos\": 0,\n      \"idCajero\": {\"id\": getSession().id},\n      \"idAsociado\": {\"id\": idComprador}\n    },\n    \"Productos\": productos\n  }\n  console.log(\"ESTE ES -------------->\" + JSON.stringify(data));\n  return true;\n}\n\nconst changeCart = async (idComprador: number, costoPuntos: number) => {\n  const data = { \n    \"id\": idComprador,\n    \"puntosClub\": costoPuntos\n  }\n  console.log(\"La data de buy es:\", data);\n  \n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/canje/${idComprador}/`, data, { //hardcode\n  headers: {\n  'Content-Type': 'application/json',\n  'Authorization': 'Bearer ' + getSession().id_token\n  },\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if(res === 200){\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport { getProducts , getCustomer, buyCart, changeCart, buyCart2 }\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}