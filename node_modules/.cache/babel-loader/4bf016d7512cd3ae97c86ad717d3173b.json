{"ast":null,"code":"import axios from 'axios';\nimport { createMemberClubAdapter } from '../../../adapters/Cashier/memberClub.adapter';\nimport { createMemberAdapter } from '../../../adapters/Cashier/member.adapter';\nimport { createCustomerAdapter } from '../../../adapters/Cashier/customer.adapter';\nimport { getSession } from '../../../utilities/public.utilities';\nconst API_URL = \"http://localhost:8080/api\";\n\nconst getProducts = async () => {\n  //console.log(\"Cargando productos para user--> \" + getSession().id_token );\n  const res = await axios.get(API_URL + `/productos/activos`, {\n    //Hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir el menu de products. Type error -> \" + error.response.status);\n    return error.response.status;\n  }); //console.log(res.data);\n\n  return res.data;\n};\n\nconst getCustomer = async identificador => {\n  // TOKEN DE SESION DE USUARIO.\n  const res = await axios.get(`http://localhost:8080/api/asociado-clubs/club/${getSession().club.id}/ident/${identificador}`, {\n    //Hardcode buscamos al asociado-club\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de MemberClub. Type error -> \" + error);\n    return error;\n  });\n\n  if (res === 401 || res === 0) {\n    return res;\n  }\n\n  const res2 = await axios.get(`http://localhost:8080/api/asociados/${res.data.idAsociado.id}`, {\n    //Hardcode buscamos al asociado\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de Member. Type error -> \" + error);\n    return error;\n  });\n\n  if (res === 401 || res === 0) {\n    return res;\n  }\n\n  if (res.status === 200 && res2.status === 200) {\n    const memberClub = createMemberClubAdapter(res.data); //console.log(\"memberClub: \" + JSON.stringify(memberClub));\n\n    const member = createMemberAdapter(res2.data); //console.log(\"member: \" + JSON.stringify(member))\n\n    const customer = {\n      memberClub: memberClub,\n      member: member\n    };\n    return createCustomerAdapter(customer);\n  }\n};\n\nconst buyCart = async (idComprador, puntosRecompensa) => {\n  const data = {\n    \"id\": idComprador,\n    \"puntosClub\": puntosRecompensa\n  }; //console.log(\"La data de buy es:\", data);\n\n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/venta/${idComprador}/`, data, {\n    //hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if (res === 200) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nconst changeCart = async (idComprador, costoPuntos) => {\n  const data = {\n    \"id\": idComprador,\n    \"puntosClub\": costoPuntos\n  };\n  console.log(\"La data de buy es:\", data);\n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/canje/${idComprador}/`, data, {\n    //hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    }\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if (res === 200) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport { getProducts, getCustomer, buyCart, changeCart };","map":{"version":3,"names":["axios","createMemberClubAdapter","createMemberAdapter","createCustomerAdapter","getSession","API_URL","getProducts","res","get","headers","id_token","then","response","catch","error","console","status","data","getCustomer","identificador","club","id","res2","idAsociado","memberClub","member","customer","buyCart","idComprador","puntosRecompensa","patch","changeCart","costoPuntos","log"],"sources":["/media/eduardo/DatosUbuntu/Universidad/TY Clients/ty-clients/frontend/ty-clients/src/pages/Cashier/services/cashier.services.ts"],"sourcesContent":["import axios from 'axios';\nimport { MemberClub } from '../../../models/Cashier/memberClub.model';\nimport { Product } from '../../../models/Cashier/product.model';\nimport { Customer } from '../../../models/Cashier/customer.model';\nimport { createMemberClubAdapter } from '../../../adapters/Cashier/memberClub.adapter';\nimport { Member } from '../../../models/Cashier/member.model';\nimport { createMemberAdapter } from '../../../adapters/Cashier/member.adapter';\nimport { createCustomerAdapter } from '../../../adapters/Cashier/customer.adapter';\nimport { getSession } from '../../../utilities/public.utilities';\n\n\nconst API_URL: string = \"http://localhost:8080/api\";\n\nconst getProducts = async () => {\n  //console.log(\"Cargando productos para user--> \" + getSession().id_token );\n  const res = await axios.get<Array<Product>>(API_URL + `/productos/activos`, { //Hardcode\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir el menu de products. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n  //console.log(res.data);\n\n  return res.data;\n};\n\n\nconst getCustomer = async (identificador: string) => {\n  // TOKEN DE SESION DE USUARIO.\n  const res = await axios.get<MemberClub>(`http://localhost:8080/api/asociado-clubs/club/${getSession().club.id}/ident/${identificador}`, { //Hardcode buscamos al asociado-club\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de MemberClub. Type error -> \" + error);\n    return error;\n  });\n  \n  if((res === 401 || res === 0)){\n    return res;\n  } \n\n  const res2 = await axios.get<Member>(`http://localhost:8080/api/asociados/${res.data.idAsociado.id}`, { //Hardcode buscamos al asociado\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getSession().id_token\n    },\n  }).then(function (response) {\n    return response;\n  }).catch(function (error) {\n    console.error(\"Error al pedir los datos de Member. Type error -> \" + error);\n    return error;\n  });\n\n  if((res === 401 || res === 0)){\n    return res;\n  } \n  \n  if ((res.status === 200 && res2.status === 200)) {\n    const memberClub = createMemberClubAdapter(res.data);\n    //console.log(\"memberClub: \" + JSON.stringify(memberClub));\n    const member = createMemberAdapter(res2.data)\n    //console.log(\"member: \" + JSON.stringify(member))\n    const customer: Customer = {\n      memberClub: memberClub,\n      member: member\n    }\n    \n    return createCustomerAdapter(customer);\n  }\n}\n\nconst buyCart = async (idComprador: number, puntosRecompensa: number) => {\n  \n  const data = { \n    \"id\": idComprador,\n    \"puntosClub\": puntosRecompensa\n  }\n  //console.log(\"La data de buy es:\", data);\n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/venta/${idComprador}/`, data, { //hardcode\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getSession().id_token\n  },\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n  \n  if(res === 200){\n    return true;\n  } else {\n    return false;\n  }\n}\n\nconst changeCart = async (idComprador: number, costoPuntos: number) => {\n  const data = { \n    \"id\": idComprador,\n    \"puntosClub\": costoPuntos\n  }\n  console.log(\"La data de buy es:\", data);\n  \n  const res = await axios.patch(`http://localhost:8080/api/asociado-clubs/canje/${idComprador}/`, data, { //hardcode\n  headers: {\n  'Content-Type': 'application/json',\n  'Authorization': 'Bearer ' + getSession().id_token\n  },\n  }).then(function (response) {\n    return response.status;\n  }).catch(function (error) {\n    console.error(\"Error al intentar realizar la compra. Type error -> \" + error.response.status);\n    return error.response.status;\n  });\n\n  if(res === 200){\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport { getProducts , getCustomer, buyCart, changeCart }\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}