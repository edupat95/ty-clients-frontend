{"ast":null,"code":"const cashierInitialState = {\n  products: [],\n  cart: []\n};\n\nconst cashierReducer = (state, action) => {\n  //El state es del mismo tipo que initial state\n  switch (action.type) {\n    case 'LIST_PRODUCT_MENU':\n      return { ...state,\n        products: [...action.payload]\n      };\n\n    case 'ADD_TO_CART':\n      let itemInCart = state.cart.find(item => item.product.id === action.payload.id); //Si el producto ya se encuentra en cart, simplemente suma una unidad, en el caso de que no exista lo agregaga al carro\n\n      return itemInCart ? { ...state,\n        cart: state.cart.map(item => item.product.id === action.payload.id ? { ...item,\n          quantity: item.quantity + 1\n        } : item)\n      } : { ...state,\n        cart: [...state.cart, {\n          product: action.payload,\n          quantity: 1\n        }]\n      };\n\n    case 'REMOVE_ONE_FROM_CART':\n      let itemToDelete = state.cart.find(item => item.product.id === action.payload.id);\n      return itemToDelete && itemToDelete.quantity > 1 ? { ...state,\n        cart: state.cart.map(item => item.product.id === action.payload.id ? { ...item,\n          quantity: item.quantity - 1\n        } : item)\n      } : { ...state,\n        cart: state.cart.filter(item => item.product.id !== action.payload.id)\n      };\n\n    case 'REMOVE_ALL_FROM_CART':\n      return { ...state,\n        cart: state.cart.filter(item => item.product.id !== action.payload.id)\n      };\n\n    case 'ADD_ONE_TO_CART':\n      let itemToAdd = state.cart.find(item => item.product.id === action.payload.id);\n      return itemToAdd ? { ...state,\n        cart: state.cart.map(item => item.product.id === action.payload.id ? { ...item,\n          quantity: item.quantity + 1\n        } : item)\n      } : { ...state,\n        cart: state.cart.map(item => item.product.id === action.payload.id ? { ...item,\n          quantity: item.quantity + 1\n        } : item)\n      };\n\n    case 'CLEAR_CART':\n      return { ...state,\n        cart: cashierInitialState.cart\n      };\n\n    default:\n      return state;\n  } //siempre retorna un nuevo estado\n\n};\n\nexport { cashierReducer, cashierInitialState };","map":{"version":3,"names":["cashierInitialState","products","cart","cashierReducer","state","action","type","payload","itemInCart","find","item","product","id","map","quantity","itemToDelete","filter","itemToAdd"],"sources":["/media/eduardo/DatosUbuntu/Universidad/TY Clients/ty-clients/frontend/ty-clients/src/pages/Cashier/reducer/cashier.reducer.ts"],"sourcesContent":["import type {CashierActionType, stateType} from \"../actions/cashier.actions\";\n\nconst cashierInitialState: stateType = {\n  products: [],\n  cart: []\n}\n\nconst cashierReducer = (state: typeof cashierInitialState, action: CashierActionType) => { //El state es del mismo tipo que initial state\n  switch (action.type) {\n    case 'LIST_PRODUCT_MENU':\n      return {\n        ...state,\n        products: [...action.payload],\n      }\n    case 'ADD_TO_CART':\n      let itemInCart = state.cart.find((item) => item.product.id === action.payload.id);\n      //Si el producto ya se encuentra en cart, simplemente suma una unidad, en el caso de que no exista lo agregaga al carro\n      return itemInCart ?\n        {\n          ...state,\n          cart: state.cart.map((item) =>\n            item.product.id === action.payload.id\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          ),\n        } : {\n          ...state,\n          cart: [...state.cart, { product: action.payload, quantity: 1 }]\n        }\n    case 'REMOVE_ONE_FROM_CART':\n      let itemToDelete = state.cart.find((item) => item.product.id === action.payload.id);\n      return itemToDelete && itemToDelete.quantity > 1\n        ? {\n          ...state,\n          cart: state.cart.map((item) =>\n            item.product.id === action.payload.id\n              ? { ...item, quantity: item.quantity - 1 }\n              : item\n          ),\n        }\n        : {\n          ...state,\n          cart: state.cart.filter((item) => item.product.id !== action.payload.id),\n        };\n    case 'REMOVE_ALL_FROM_CART':\n      return {\n        ...state,\n        cart: state.cart.filter((item) => item.product.id !== action.payload.id),\n      };\n    case 'ADD_ONE_TO_CART':\n      let itemToAdd = state.cart.find((item) => item.product.id === action.payload.id);\n\n      return itemToAdd\n        ? {\n          ...state,\n          cart: state.cart.map((item) =>\n            item.product.id === action.payload.id\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          ),\n        }\n        : {\n          ...state,\n          cart: state.cart.map((item) =>\n            item.product.id === action.payload.id\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          ),\n        };\n    case 'CLEAR_CART':\n      return {\n        ...state,\n        cart: cashierInitialState.cart\n      }\n    default:\n      return state;\n  }\n  //siempre retorna un nuevo estado\n}\n\nexport {cashierReducer, cashierInitialState};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}